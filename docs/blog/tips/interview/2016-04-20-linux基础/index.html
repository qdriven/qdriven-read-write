<!DOCTYPE html>
<html lang="en-us"><head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
	<meta name="generator" content="Hugo 0.82.0" />
	
	<link rel="icon" href="/images/logos/logo.png">
	
	<title>Linux 基础 | DirtyHands-Tester</title>
	
	

	<meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="Linux 基础"/>
<meta name="twitter:description" content="Linux 的使用的一些基本知识  Linux LVM 硬盘挂载 Linux 的用户安全 Linux 网络监控  Linux LVM 硬盘挂载 使用sda硬盘挂在到/var 目录，当硬盘用完之后就没有办法再挂载到/var 下面了，那么如何解决呢？ 使用LVM."/>

	<meta property="og:title" content="Linux 基础" />
<meta property="og:description" content="Linux 的使用的一些基本知识  Linux LVM 硬盘挂载 Linux 的用户安全 Linux 网络监控  Linux LVM 硬盘挂载 使用sda硬盘挂在到/var 目录，当硬盘用完之后就没有办法再挂载到/var 下面了，那么如何解决呢？ 使用LVM." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://qdriven.github.io/blog/tips/interview/2016-04-20-linux%E5%9F%BA%E7%A1%80/" /><meta property="article:section" content="blog" />
<meta property="article:published_time" content="2016-04-21T02:31:11&#43;00:00" />
<meta property="article:modified_time" content="2016-04-21T02:31:11&#43;00:00" />



	<link href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
	<link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.0.13/css/all.css" integrity="sha384-DNOHZ68U8hZfKXOrtjWvjxusGo9WQnrNx2sqG0tfsghAvtVlRW3tvkXWZh58N9jp"
	 crossorigin="anonymous">
	<link href="https://fonts.googleapis.com/css?family=Righteous%7CMerriweather:300,300i,400,400i,700,700i" rel="stylesheet">
	<link href="/css/medium.css" rel="stylesheet">
	<link href="/css/additional.css" rel="stylesheet">

	
	
</head>
<body>
<nav class="navbar navbar-expand-lg navbar-light bg-white fixed-top mediumnavigation nav-down">
    <div class="container pr-0">
        
        <a class="navbar-brand" href="https://qdriven.github.io//">

            
            <img src="/images/logos/logo.png" alt="logo">
            
        </a>
        

        <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarMediumish" aria-controls="navbarSupportedContent"
            aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
        </button>

        
        <div class="collapse navbar-collapse" id="navbarMediumish">
            
            <ul class="navbar-nav ml-auto">
                 
                <li class="nav-item ">
                    <a class="nav-link" href="/blog">All Blogs</a>
                </li>
                 
                <li class="nav-item ">
                    <a class="nav-link" href="/tags/english/">Api测试英文</a>
                </li>
                 
                <li class="nav-item ">
                    <a class="nav-link" href="/tags/python/">Python-Tips</a>
                </li>
                
            </ul>
        </div>
        
    </div>
</nav>


        <div class="site-content">   
            <div class="container">
<div class="mainheading">
    <h1 class="sitetitle">DirtyHands-Tester</h1>
    <p class="lead">
         Learning from Practice
    </p>
</div><div class="main-content">
        
        <div class="container">
            <div class="row">
                
                <div class="col-md-2 pl-0"><div class="share sticky-top sticky-top-offset">
    
    

    
</div>
</div>
                                
                <div class="col-md-9 flex-first flex-md-unordered">
                    <div class="mainheading">
                        	
                        
                        
                        
                        <div class="row post-top-meta">
                            <div class="col-xs-12 col-md-3 col-lg-2 text-center text-md-left mb-4 mb-md-0 md-nopad-right">
                                <img class="author-thumb" src="/images/author.png" alt="dirty-hands-qa">
                            </div>
                            <div class="col-xs-12 col-md-9 col-lg-10 text-center text-md-left md-nopad-left">
                                <a target="_blank" class="link-dark">dirty-hands-qa</a><br>
                                <span class="author-description">
                                    DirtyHands<br>
                                    <i class="far fa-star"></i>
                                    Apr 21, 2016
                                    <i class="far fa-clock clock"></i>
                                    5 min read
                                </span>					
                            </div>
                        </div>			
                        	
                        
                                                
                        
                        <h1 class="posttitle">Linux 基础</h1> 
                    </div>

                    
                    
                    
                    

                    
                    <div class="article-post">
                        <h1 id="linux-的使用的一些基本知识">Linux 的使用的一些基本知识</h1>
<ul>
<li>Linux LVM 硬盘挂载</li>
<li>Linux 的用户安全</li>
<li>Linux 网络监控</li>
</ul>
<h2 id="linux-lvm-硬盘挂载">Linux LVM 硬盘挂载</h2>
<p>使用sda硬盘挂在到/var 目录，当硬盘用完之后就没有办法再挂载到/var 下面了，那么如何解决呢？ 使用LVM. LVM是磁盘分区和文件系统之间添加一个逻辑层，来为文件系统屏蔽磁盘分区布局，提供一个抽象的盘卷。</p>
<p>LVM术语：</p>
<ul>
<li>physical media,/dev/hda1,/dev/sda，物理存储介质</li>
<li>physical volume, 物理卷，和物力存储介质相比较包含了LVM的管理参数</li>
<li>volume group,LVM 卷组类似非LVM系统的物理硬盘，可以创建多个物理卷</li>
<li>logic volume，逻辑卷LVM逻辑卷类似于非LVM系统的硬盘分区</li>
<li>physical extend：一个物理卷physical extends的基本单元，LVM寻址的最小单位</li>
<li>logic extend：逻辑卷被划分为称为LE的可被寻址的基本单位</li>
</ul>
<pre><code>PV:是物理的磁盘分区
VG:LVM中的物理的磁盘分区，也就是PV，必须加入VG，可以将VG理解为一个仓库或者是几个大的硬盘。
LV：也就是从VG中划分的逻辑分区
</code></pre><h2 id="linux-的用户安全">Linux 的用户安全</h2>
<ul>
<li>root</li>
<li>sudo</li>
<li>分组</li>
<li>权限 Linux的-rwxrwxrwx权限管理也可谓人尽皆知 先rwx的权限管理是基于用户和组的，并且只是大致的分为owner|group|other这三类，无法再作更加细粒度的划分。有鉴于此，Linux目前默认是有ACL(Access Control List)管理的，所谓ACL就是能够提供更加细粒度的用户和组管理，比如可以明确哪个user可以有什么样的权限。如下示例</li>
</ul>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell">getfacl abcd
</code></pre></div><ul>
<li>PAM</li>
</ul>
<p>PAM只需要简单了解就行，是一个可插拔的认证模块,开发Linux的极客们搞出来的可复用的一个组件。举个例子，现在有一个app，想要验证当前的登录用户是否有权限操作某个目录，那么在PAM里面有现成的模块，app只需要include这个模块，给出一个配置文件，就可以了。有一个非常好的关于PAM的视频教程，请看这里</p>
<p>PAM是应用程序用来进行身份验证的。早期的身份验证和应用程序本身耦合，后来把身份验证单独抽出来，通过PAM来进行管理 /etc/pam.d/xxx 是能用pam来进行管理的应用程序PAM设置，在安装应用程序的时候安装。/etc/security/mmm, /lib/security/pam_mmm是一套。</p>
<h2 id="linux-网络监控">Linux 网络监控</h2>
<ul>
<li>iptables</li>
<li>router</li>
<li>netstat</li>
</ul>
<h2 id="linux的文件系统">Linux的文件系统</h2>
<h2 id="linux的service">Linux的Service</h2>
<ul>
<li>/etc/init.d</li>
<li>/usr/bin,/usr/sbin,/usr/local/bin</li>
<li>log /var/log/messages</li>
</ul>
<h2 id="linux-disk">Linux Disk</h2>
<ul>
<li>df -lah</li>
<li>fdisk -l</li>
<li>LVM</li>
<li>vmstat,top</li>
</ul>
<h2 id="linux-网络">Linux 网络</h2>
<p>网络的坑很多，需要把网络搞通没个3，4年很难。下面从网络的配置文件着手，简单理一下网络方面的内容。网络最难的方面应该是如何搭建一个合理的高效的局域网或者城域网，这个需要有专业的网络知识。</p>
<h3 id="配置文件">配置文件</h3>
<p>/etc/hosts私有IP对应主机名 /etc/resolv.confnameserver DNS的IP /etc/sysconfig/network其中NETWORKING=要不要有网络，HOSTNAME=主机名，NETWORKING_IPV6=支持ipv6 /etc/sysconfig/network-scripts/ifcfg-xxx其中DEVICE=网卡代号，BOOTPROTO=是否使用dhcp，HWADDR，IPADDR，NETMASK，ONBOOT，GATEWAY</p>
<h3 id="与网络有关的一些命令">与网络有关的一些命令</h3>
<ul>
<li>router -n查看路由的命令，特别是要看带G的，表示gateway，而带U的表示up。</li>
<li>netstat -anp查看所有启动的tcp,udp,unix stream的应用程序，以及他们的状态，具体可以参考TCP/IP,JavaSocket简单分析一文。</li>
</ul>
<h2 id="工具">工具</h2>
<p><a href="http://linuxtools-rst.readthedocs.org/zh_CN/latest/base/index.html">一个好的Linux命令参考网站</a></p>
<h3 id="cpu">CPU</h3>
<ul>
<li>top 特别注意load</li>
<li>ps aux和ps -ef 特别注意进程状态</li>
<li>vmstat 1表示每秒采集一次</li>
<li>sar -u 1 查看所有cpu相关的运行时间</li>
</ul>
<h3 id="memory">Memory</h3>
<ul>
<li>free</li>
<li>vmstat 1 注意其中的swap ram block之间的关系</li>
<li>sar -r 1 内存使用率</li>
<li>sar -W 1 查看swap，查询是否由于内存不足产生大量内存交换</li>
</ul>
<h3 id="io">IO</h3>
<ul>
<li>lsof -i:port 查询哪个进程占用了这个端口号</li>
<li>lsof -u username 用户打开的文件</li>
<li>lsof -p pid 进程打开的文件</li>
</ul>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell"><span style="color:#75715e">#!/bin/bash
</span><span style="color:#75715e"></span><span style="color:#75715e">#################################################</span>
<span style="color:#75715e">#   author  huachao</span>
<span style="color:#75715e">#   date    2015-12-09</span>
<span style="color:#75715e">#   email   i@huachao.me</span>
<span style="color:#75715e">#   web     blog.huachao.me</span>
<span style="color:#75715e">#################################################</span>

flagFile<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;/root/centos6-init.executed&#34;</span>

precheck<span style="color:#f92672">(){</span>

    <span style="color:#66d9ef">if</span> <span style="color:#f92672">[[</span> <span style="color:#e6db74">&#34;</span><span style="color:#66d9ef">$(</span>whoami<span style="color:#66d9ef">)</span><span style="color:#e6db74">&#34;</span> !<span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;root&#34;</span> <span style="color:#f92672">]]</span>; <span style="color:#66d9ef">then</span>
    echo <span style="color:#e6db74">&#34;please run this script as root .&#34;</span> &gt;&amp;<span style="color:#ae81ff">2</span>
    exit <span style="color:#ae81ff">1</span>
    <span style="color:#66d9ef">fi</span>

    <span style="color:#66d9ef">if</span> <span style="color:#f92672">[</span> -f <span style="color:#e6db74">&#34;</span>$flagFile<span style="color:#e6db74">&#34;</span> <span style="color:#f92672">]</span>; <span style="color:#66d9ef">then</span>
    echo <span style="color:#e6db74">&#34;this script had been executed, please do not execute again!!&#34;</span> &gt;&amp;<span style="color:#ae81ff">2</span>
    exit <span style="color:#ae81ff">1</span>
    <span style="color:#66d9ef">fi</span>

    echo -e <span style="color:#e6db74">&#34;\033[31m WARNING! THIS SCRIPT WILL \033[0m\n&#34;</span>
    echo -e <span style="color:#e6db74">&#34;\033[31m *1 update the system; \033[0m\n&#34;</span>
    echo -e <span style="color:#e6db74">&#34;\033[31m *2 setup security permissions; \033[0m\n&#34;</span>
    echo -e <span style="color:#e6db74">&#34;\033[31m *3 stop irrelevant services; \033[0m\n&#34;</span>
    echo -e <span style="color:#e6db74">&#34;\033[31m *4 reconfig kernel parameters; \033[0m\n&#34;</span>
    echo -e <span style="color:#e6db74">&#34;\033[31m *5 setup timezone and sync time periodically; \033[0m\n&#34;</span>
    echo -e <span style="color:#e6db74">&#34;\033[31m *6 setup tcp_wrapper and netfilter firewall; \033[0m\n&#34;</span>
    echo -e <span style="color:#e6db74">&#34;\033[31m *7 setup vsftpd; \033[0m\n&#34;</span>
    sleep <span style="color:#ae81ff">5</span>

<span style="color:#f92672">}</span>

yum_update<span style="color:#f92672">(){</span>
    yum -y update
    <span style="color:#75715e">#update system at 5:40pm daily</span>
    echo <span style="color:#e6db74">&#34;40 3 * * * root yum -y update &amp;&amp; yum clean packages&#34;</span> &gt;&gt; /etc/crontab
<span style="color:#f92672">}</span>

permission_config<span style="color:#f92672">(){</span>
    <span style="color:#75715e">#chattr +i /etc/shadow</span>
    <span style="color:#75715e">#chattr +i /etc/passwd</span>
<span style="color:#f92672">}</span>

selinux<span style="color:#f92672">(){</span>
    sed -i <span style="color:#e6db74">&#39;s/SELINUX=disabled/SELINUX=enforcing/g&#39;</span> /etc/sysconfig/selinux
    setenforce <span style="color:#ae81ff">1</span>
<span style="color:#f92672">}</span>

stop_services<span style="color:#f92672">(){</span>
    <span style="color:#66d9ef">for</span> server in <span style="color:#e6db74">`</span>chkconfig --list |grep 3:on|awk <span style="color:#e6db74">&#39;{print $1}&#39;</span><span style="color:#e6db74">`</span>
    <span style="color:#66d9ef">do</span>
        chkconfig --level <span style="color:#ae81ff">3</span> $server off
    <span style="color:#66d9ef">done</span>

    <span style="color:#66d9ef">for</span> server in crond network rsyslog sshd iptables
    <span style="color:#66d9ef">do</span>
       chkconfig --level <span style="color:#ae81ff">3</span> $server on
    <span style="color:#66d9ef">done</span>
<span style="color:#f92672">}</span>

limits_config<span style="color:#f92672">(){</span>
cat &gt;&gt; /etc/security/limits.conf <span style="color:#e6db74">&lt;&lt;EOF
</span><span style="color:#e6db74">* soft nproc 65535
</span><span style="color:#e6db74">* hard nproc 65535
</span><span style="color:#e6db74">* soft nofile 65535
</span><span style="color:#e6db74">* hard nofile 65535
</span><span style="color:#e6db74">EOF</span>
echo <span style="color:#e6db74">&#34;ulimit -SH 65535&#34;</span> &gt;&gt; /etc/rc.local
<span style="color:#f92672">}</span>

sysctl_config<span style="color:#f92672">(){</span>
sed -i <span style="color:#e6db74">&#39;s/net.ipv4.tcp_syncookies.*$/net.ipv4.tcp_syncookies = 1/g&#39;</span> /etc/sysctl.conf
sed -i <span style="color:#e6db74">&#39;s/net.ipv4.ip_forward.*$/net.ipv4.ip_forward = 1/g&#39;</span> /etc/sysctl.conf
cat &gt;&gt; /etc/sysctl.conf <span style="color:#e6db74">&lt;&lt;EOF
</span><span style="color:#e6db74">net.ipv4.tcp_max_syn_backlog = 65536
</span><span style="color:#e6db74">net.core.netdev_max_backlog =  32768
</span><span style="color:#e6db74">net.core.somaxconn = 32768
</span><span style="color:#e6db74">net.core.wmem_default = 8388608
</span><span style="color:#e6db74">net.core.rmem_default = 8388608
</span><span style="color:#e6db74">net.core.rmem_max = 16777216
</span><span style="color:#e6db74">net.core.wmem_max = 16777216
</span><span style="color:#e6db74">net.ipv4.tcp_timestamps = 0
</span><span style="color:#e6db74">net.ipv4.tcp_synack_retries = 2
</span><span style="color:#e6db74">net.ipv4.tcp_syn_retries = 2
</span><span style="color:#e6db74">net.ipv4.tcp_tw_recycle = 1
</span><span style="color:#e6db74">net.ipv4.tcp_tw_reuse = 1
</span><span style="color:#e6db74">net.ipv4.tcp_mem = 94500000 915000000 927000000
</span><span style="color:#e6db74">net.ipv4.tcp_max_orphans = 3276800
</span><span style="color:#e6db74">net.ipv4.ip_local_port_range = 1024  65535
</span><span style="color:#e6db74">EOF</span>
sysctl -p
<span style="color:#f92672">}</span>

sshd_config<span style="color:#f92672">(){</span>
    <span style="color:#66d9ef">if</span> <span style="color:#f92672">[</span> ! -f <span style="color:#e6db74">&#34;/root/.ssh/id_rsa.pub&#34;</span> <span style="color:#f92672">]</span>; <span style="color:#66d9ef">then</span>
    ssh-keygen -t rsa -P <span style="color:#e6db74">&#39;&#39;</span> -f /root/.ssh/id_rsa
    cat /root/.ssh/id_rsa.pub &gt;&gt; /root/.ssh/authorized_keys
    chmod <span style="color:#ae81ff">600</span> /root/.ssh/authorized_keys
    <span style="color:#66d9ef">fi</span>

    <span style="color:#75715e">#sed -i &#39;/^#Port/s/#Port 22/Port 65535/g&#39; /etc/ssh/sshd_config</span>
    sed -i <span style="color:#e6db74">&#39;/^#UseDNS/s/#UseDNS no/UseDNS yes/g&#39;</span> /etc/ssh/sshd_config
    <span style="color:#75715e">#sed -i &#39;s/#PermitRootLogin yes/PermitRootLogin no/g&#39; /etc/ssh/sshd_config</span>
    sed -i <span style="color:#e6db74">&#39;s/#PermitEmptyPasswords yes/PermitEmptyPasswords no/g&#39;</span> /etc/ssh/sshd_config
    sed -i <span style="color:#e6db74">&#39;s/PasswordAuthentication yes/PasswordAuthentication no/g&#39;</span> /etc/ssh/sshd_config
    /etc/init.d/sshd restart
<span style="color:#f92672">}</span>

time_config<span style="color:#f92672">(){</span>
    <span style="color:#75715e">#timezone</span>
    echo <span style="color:#e6db74">&#34;TZ=&#39;Asia/Shanghai&#39;; export TZ&#34;</span> &gt;&gt; /etc/profile

    <span style="color:#75715e"># Update time</span>
    <span style="color:#66d9ef">if</span> <span style="color:#f92672">[</span>! -f <span style="color:#e6db74">&#34;/usr/sbin/ntpdate&#34;</span><span style="color:#f92672">]</span>; <span style="color:#66d9ef">then</span>
        yum -y install ntpdate
    <span style="color:#66d9ef">fi</span>

    /usr/sbin/ntpdate pool.ntp.org
    echo <span style="color:#e6db74">&#34;30 3 * * * root (/usr/sbin/ntpdate pool.ntp.org &amp;&amp; /sbin/hwclock -w) &amp;&gt; /dev/null&#34;</span> &gt;&gt; /etc/crontab
    /sbin/service crond restart
<span style="color:#f92672">}</span>

iptables<span style="color:#f92672">(){</span>
cat &gt; /etc/sysconfig/iptables <span style="color:#e6db74">&lt;&lt; EOF
</span><span style="color:#e6db74"># Firewall configuration written by system-config-securitylevel
</span><span style="color:#e6db74"># Manual customization of this file is not recommended.
</span><span style="color:#e6db74">*filter
</span><span style="color:#e6db74">:INPUT DROP [0:0]
</span><span style="color:#e6db74">:FORWARD ACCEPT [0:0]
</span><span style="color:#e6db74">:OUTPUT ACCEPT [0:0]
</span><span style="color:#e6db74">:syn-flood - [0:0]
</span><span style="color:#e6db74">-A INPUT -i lo -j ACCEPT
</span><span style="color:#e6db74">-A INPUT -m state --state RELATED,ESTABLISHED -j ACCEPT
</span><span style="color:#e6db74">-A INPUT -p tcp -m state --state NEW -m tcp --dport 22 -j ACCEPT
</span><span style="color:#e6db74">-A INPUT -p tcp -m state --state NEW -m tcp --dport 80 -j ACCEPT
</span><span style="color:#e6db74">-A INPUT -p icmp -m limit --limit 100/sec --limit-burst 100 -j ACCEPT
</span><span style="color:#e6db74">-A INPUT -p icmp -m limit --limit 1/s --limit-burst 10 -j ACCEPT
</span><span style="color:#e6db74">-A INPUT -p tcp -m tcp --tcp-flags FIN,SYN,RST,ACK SYN -j syn-flood
</span><span style="color:#e6db74">-A INPUT -j REJECT --reject-with icmp-host-prohibited
</span><span style="color:#e6db74">-A syn-flood -p tcp -m limit --limit 3/sec --limit-burst 6 -j RETURN
</span><span style="color:#e6db74">-A syn-flood -j REJECT --reject-with icmp-port-unreachable
</span><span style="color:#e6db74">COMMIT
</span><span style="color:#e6db74">EOF</span>
/sbin/service iptables restart
source /etc/profile
<span style="color:#f92672">}</span>

other<span style="color:#f92672">(){</span>
    <span style="color:#75715e"># initdefault</span>
    sed -i <span style="color:#e6db74">&#39;s/^id:.*$/id:3:initdefault:/&#39;</span> /etc/inittab
    /sbin/init q

    <span style="color:#75715e"># PS1</span>
    <span style="color:#75715e">#echo &#39;PS1=&#34;\[\e[32m\][\[\e[35m\]\u\[\e[m\]@\[\e[36m\]\h \[\e[31m\]\w\[\e[32m\]]\[\e[36m\]$\[\e[m\]&#34;&#39; &gt;&gt; /etc/profile</span>

    <span style="color:#75715e"># Wrong password five times locked 180s</span>
    sed -i <span style="color:#e6db74">&#39;4a auth        required      pam_tally2.so deny=5 unlock_time=180&#39;</span> /etc/pam.d/system-auth
<span style="color:#f92672">}</span>

vsftpd_setup<span style="color:#f92672">(){</span>
    yum -y install vsftpd
    mv /etc/vsftpd/vsftpd.conf /etc/vsftpd/vsftpd.conf.bak
    touch /etc/vsftpd/chroot_list
    setsebool -P ftp_home_dir<span style="color:#f92672">=</span><span style="color:#ae81ff">1</span>
cat &gt;&gt; /etc/vsftpd/vsftpd.conf <span style="color:#e6db74">&lt;&lt;EOF
</span><span style="color:#e6db74"># normal user settings
</span><span style="color:#e6db74">local_enable=YES
</span><span style="color:#e6db74">write_enable=YES
</span><span style="color:#e6db74">local_umask=022
</span><span style="color:#e6db74">chroot_local_user=YES
</span><span style="color:#e6db74">chroot_list_enable=YES
</span><span style="color:#e6db74">chroot_list_file=/etc/vsftpd/chroot_list
</span><span style="color:#e6db74">local_max_rate=10000000
</span><span style="color:#e6db74"># anonymous settings
</span><span style="color:#e6db74">anonymous_enable=YES
</span><span style="color:#e6db74">no_anon_password=YES
</span><span style="color:#e6db74">anon_max_rate=1000000
</span><span style="color:#e6db74">data_connection_timeout=60
</span><span style="color:#e6db74">idle_session_timeout=600
</span><span style="color:#e6db74"># ssl settings
</span><span style="color:#e6db74">#ssl_enable=YES             
</span><span style="color:#e6db74">#allow_anon_ssl=NO           
</span><span style="color:#e6db74">#force_local_data_ssl=YES    
</span><span style="color:#e6db74">#force_local_logins_ssl=YES  
</span><span style="color:#e6db74">#ssl_tlsv1=YES               
</span><span style="color:#e6db74">#ssl_sslv2=NO
</span><span style="color:#e6db74">#ssl_sslv3=NO
</span><span style="color:#e6db74">#rsa_cert_file=/etc/vsftpd/vsftpd.pem
</span><span style="color:#e6db74"># server settings
</span><span style="color:#e6db74">max_clients=50
</span><span style="color:#e6db74">max_per_ip=5
</span><span style="color:#e6db74">use_localtime=YES
</span><span style="color:#e6db74">dirmessage_enable=YES
</span><span style="color:#e6db74">xferlog_enable=YES
</span><span style="color:#e6db74">connect_from_port_20=YES
</span><span style="color:#e6db74">xferlog_std_format=YES
</span><span style="color:#e6db74">listen=YES
</span><span style="color:#e6db74">pam_service_name=vsftpd
</span><span style="color:#e6db74">tcp_wrappers=YES
</span><span style="color:#e6db74">#banner_file=/etc/vsftpd/welcome.txt
</span><span style="color:#e6db74">dual_log_enable=YES
</span><span style="color:#e6db74">pasv_min_port=65400
</span><span style="color:#e6db74">pasv_max_port=65410
</span><span style="color:#e6db74">EOF</span>
    chkconfig --level <span style="color:#ae81ff">3</span> vsftpd on
    service vsftpd restart
<span style="color:#f92672">}</span>

main<span style="color:#f92672">(){</span>
    precheck

    printf <span style="color:#e6db74">&#34;\033[32m================%40s================\033[0m\n&#34;</span> <span style="color:#e6db74">&#34;updating the system            &#34;</span>
    yum_update

    printf <span style="color:#e6db74">&#34;\033[32m================%40s================\033[0m\n&#34;</span> <span style="color:#e6db74">&#34;re-config permission           &#34;</span>
    permission_config

    printf <span style="color:#e6db74">&#34;\033[32m================%40s================\033[0m\n&#34;</span> <span style="color:#e6db74">&#34;enabling selinux               &#34;</span>
    selinux

    printf <span style="color:#e6db74">&#34;\033[32m================%40s================\033[0m\n&#34;</span> <span style="color:#e6db74">&#34;stopping irrelevant services   &#34;</span>
    stop_services

    printf <span style="color:#e6db74">&#34;\033[32m================%40s================\033[0m\n&#34;</span> <span style="color:#e6db74">&#34;/etc/security/limits.config    &#34;</span>
    limits_config

    printf <span style="color:#e6db74">&#34;\033[32m================%40s================\033[0m\n&#34;</span> <span style="color:#e6db74">&#34;/etc/sysctl.conf               &#34;</span>
    sysctl_config

    printf <span style="color:#e6db74">&#34;\033[32m================%40s================\033[0m\n&#34;</span> <span style="color:#e6db74">&#34;sshd re-configuring            &#34;</span>
    sshd_config

    printf <span style="color:#e6db74">&#34;\033[32m================%40s================\033[0m\n&#34;</span> <span style="color:#e6db74">&#34;configuring time               &#34;</span>
    time_config

    printf <span style="color:#e6db74">&#34;\033[32m================%40s================\033[0m\n&#34;</span> <span style="color:#e6db74">&#34;configuring firewall           &#34;</span>
<span style="color:#75715e">#   iptables</span>

    printf <span style="color:#e6db74">&#34;\033[32m================%40s================\033[0m\n&#34;</span> <span style="color:#e6db74">&#34;someother stuff                &#34;</span>
    other

    printf <span style="color:#e6db74">&#34;\033[32m================%40s================\033[0m\n&#34;</span> <span style="color:#e6db74">&#34;done! rebooting                &#34;</span>
    touch <span style="color:#e6db74">&#34;</span>$flagFile<span style="color:#e6db74">&#34;</span>
    sleep <span style="color:#ae81ff">5</span>
    reboot
<span style="color:#f92672">}</span>

main
</code></pre></div>
                    </div>
                    
                    
                    <div class="after-post-tags">
                        <ul class="tags">
                        
                        <li>
                        <a href="/tags/interview">interview</a>
                        </li>
                        
                        </ul>
                    </div>
                    
                    
                    
                    <div class="row PageNavigation d-flex justify-content-between font-weight-bold">
                    
                        <a class="d-block col-md-6" href="https://qdriven.github.io/blog/tips/git/git-history/"> &laquo; Git 基本使用－2</a>
                    
                    
                        <a class="d-block col-md-6 text-lg-right" href="https://qdriven.github.io/blog/tips/interview/2016-04-20-%E7%9B%91%E6%8E%A7%E7%9A%84%E4%B8%80%E4%BA%9B%E5%B7%A5%E5%85%B7/">Web监控基础 &raquo;</a>
                    
                    <div class="clearfix"></div>
                    </div>
                    
                </div>
                
            </div>
        </div>
        
        
    </div>


            </div>
<div class="jumbotron fortags">
	<div class="d-md-flex h-100">
		<div class="col-md-4 transpdark align-self-center text-center h-100">
			<div class="d-md-flex align-items-center justify-content-center h-100">
				<h2 class="d-md-block d-none align-self-center py-1 font-weight-light">Explore <span class="d-none d-md-inline">→</span></h2>
			</div>
		</div>
		<div class="col-md-8 p-5 align-self-center text-center">
			
			<a class="mt-1 mb-1" href="/tags/10minutes">10minutes</a>
			
			<a class="mt-1 mb-1" href="/tags/48h">48h</a>
			
			<a class="mt-1 mb-1" href="/tags/ansible">ansible</a>
			
			<a class="mt-1 mb-1" href="/tags/anti-bug">anti-bug</a>
			
			<a class="mt-1 mb-1" href="/tags/api-teting">api-teting</a>
			
			<a class="mt-1 mb-1" href="/tags/automation">automation</a>
			
			<a class="mt-1 mb-1" href="/tags/bigdata">bigdata</a>
			
			<a class="mt-1 mb-1" href="/tags/cheatsheet">cheatsheet</a>
			
			<a class="mt-1 mb-1" href="/tags/ci-cd">ci-cd</a>
			
			<a class="mt-1 mb-1" href="/tags/concurrency">concurrency</a>
			
			<a class="mt-1 mb-1" href="/tags/daily-automation-tip">daily-automation-tip</a>
			
			<a class="mt-1 mb-1" href="/tags/daily-tips">daily-tips</a>
			
			<a class="mt-1 mb-1" href="/tags/designpattern">designpattern</a>
			
			<a class="mt-1 mb-1" href="/tags/devops">devops</a>
			
			<a class="mt-1 mb-1" href="/tags/english">english</a>
			
			<a class="mt-1 mb-1" href="/tags/ep">ep</a>
			
			<a class="mt-1 mb-1" href="/tags/git">git</a>
			
			<a class="mt-1 mb-1" href="/tags/hbase">hbase</a>
			
			<a class="mt-1 mb-1" href="/tags/interview">interview</a>
			
			<a class="mt-1 mb-1" href="/tags/java">java</a>
			
			<a class="mt-1 mb-1" href="/tags/jira">jira</a>
			
			<a class="mt-1 mb-1" href="/tags/jmeter">jmeter</a>
			
			<a class="mt-1 mb-1" href="/tags/one-page">one-page</a>
			
			<a class="mt-1 mb-1" href="/tags/pattern">pattern</a>
			
			<a class="mt-1 mb-1" href="/tags/pe">pe</a>
			
			<a class="mt-1 mb-1" href="/tags/performance">performance</a>
			
			<a class="mt-1 mb-1" href="/tags/productivity">productivity</a>
			
			<a class="mt-1 mb-1" href="/tags/python">python</a>
			
			<a class="mt-1 mb-1" href="/tags/qa-daily">qa-daily</a>
			
			<a class="mt-1 mb-1" href="/tags/qa-thoughts">qa-thoughts</a>
			
			<a class="mt-1 mb-1" href="/tags/qatrap">qatrap</a>
			
			<a class="mt-1 mb-1" href="/tags/real-bug">real-bug</a>
			
			<a class="mt-1 mb-1" href="/tags/refactor">refactor</a>
			
			<a class="mt-1 mb-1" href="/tags/refactoring">refactoring</a>
			
			<a class="mt-1 mb-1" href="/tags/scrum">scrum</a>
			
			<a class="mt-1 mb-1" href="/tags/shell">shell</a>
			
			<a class="mt-1 mb-1" href="/tags/test-ops">test-ops</a>
			
			<a class="mt-1 mb-1" href="/tags/testing-platform">testing-platform</a>
			
			<a class="mt-1 mb-1" href="/tags/tips">tips</a>
			
			<a class="mt-1 mb-1" href="/tags/tooling">tooling</a>
			
			<a class="mt-1 mb-1" href="/tags/toolings">toolings</a>
			
			<a class="mt-1 mb-1" href="/tags/truestories">truestories</a>
			
			<a class="mt-1 mb-1" href="/tags/worthless">worthless</a>
			
			<a class="mt-1 mb-1" href="/tags/%E6%B5%81%E9%87%8F%E5%9B%9E%E6%94%BE">流量回放</a>
			
		</div>
	</div>
</div>




        </div>


<script src="https://code.jquery.com/jquery-3.4.1.min.js"></script>
    
<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.6/umd/popper.min.js" integrity="sha384-wHAiFfRlMFy6i5SRaxvfOCifBUQy1xHdJ/yoi7FRNXMRBu5WHdZYu1hA6ZOblgut" crossorigin="anonymous"></script>

<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js" integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM" crossorigin="anonymous"></script>

<script src="/js/mediumish.js"></script>

    </body>
</html>
